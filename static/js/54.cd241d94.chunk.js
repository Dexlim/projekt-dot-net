"use strict";(self.webpackChunkreact_complete_guide=self.webpackChunkreact_complete_guide||[]).push([[54],{3054:function(e,n,t){t.r(n),t.d(n,{default:function(){return R}});var i=t(5861),a=t(885),r=t(7757),c=t.n(r),s=t(2791),o=t(9815),l=t(4942),d=t(1413),u=t(2982),m=t(4164),p="Extras_backdrop__eOKNH",x="Extras_extramodal__kYsRv",f="Extras_close__S4wVh",h="Extras_foodcontainer__4Yddi",j="Extras_imageoverlay__-W2ko",g="Extras_fooddesc__RYP6R",_="Extras_control__JTNs9",v="Extras_confirm__tE2oL",z="Extras_ingredient-list__DfPfm",k="Extras_ingredient__pF6xu",N="Extras_btn-container__c9z+1",y="Extras_pizzasize__O6f-7",C=t(184),Z=function(e){return(0,C.jsx)("div",{className:p,onClick:e.closeModal,children:(0,C.jsx)("button",{onClick:e.closeModal,className:f,children:"X"})})},I=function(e){var n=(0,s.useContext)(o.Z),t=(0,s.useState)(1),r=(0,a.Z)(t,2),l=r[0],m=r[1],p=(0,s.useState)(e.price),f=(0,a.Z)(p,2),Z=f[0],I=f[1],b=(0,s.useState)([]),E=(0,a.Z)(b,2),P=E[0],M=E[1],S=(0,s.useState)(),D=(0,a.Z)(S,2),w=D[0],F=D[1],U=(0,s.useState)("small"),T=(0,a.Z)(U,2),L=T[0],R=T[1],O=(0,s.useState)(""),B=(0,a.Z)(O,2),H=B[0],Y=B[1],G=(0,s.useState)(e.name+" 32cm"),V=(0,a.Z)(G,2),X=V[0],A=V[1];function J(){return(J=(0,i.Z)(c().mark((function e(){var n,t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://localhost:44376/api/Ingredients");case 3:if((n=e.sent).ok){e.next=6;break}throw new Error;case 6:return e.next=8,n.json();case 8:(t=e.sent)[0].amount=1,M([t[0]]),F(t),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}(0,s.useEffect)((function(){"Pizza"===e.type?function(){J.apply(this,arguments)}():A(e.name)}),[]);var K=function(e){var n=(0,u.Z)(P).findIndex((function(n){return n.ingredientId===e})),t=P[n];return t?t.amount:0};return(0,C.jsxs)("div",{className:x,children:[(0,C.jsxs)("div",{className:h,children:[(0,C.jsx)("img",{src:e.imgUrl,alt:e.name}),(0,C.jsx)("div",{className:j}),(0,C.jsxs)("div",{className:g,children:[(0,C.jsx)("h2",{children:X}),(0,C.jsx)("p",{children:e.description}),"Pizza"===e.type&&(0,C.jsxs)("p",{children:[(0,C.jsx)("b",{children:"Dodatki:"}),(0,C.jsx)("br",{})]}),(0,C.jsx)("p",{children:H}),(0,C.jsxs)("h3",{children:["Ilo\u015b\u0107: ",l]}),(0,C.jsxs)("div",{className:_,children:[(0,C.jsx)("button",{onClick:function(){l>1&&m(l-1)},children:"-"}),(0,C.jsxs)("h1",{children:[(l*Z).toFixed(2)," z\u0142"]}),(0,C.jsx)("button",{onClick:function(){m(l+1)},children:"+"})]})]})]}),(0,C.jsxs)("div",{className:z,children:["Pizza"==e.type&&(0,C.jsx)("h1",{children:"Dodatki"}),w&&w.filter((function(e){return"extra"===e.ingredientType})).map((function(e){return(0,C.jsxs)("div",{className:k,children:[(0,C.jsx)("p",{children:e.ingredientName}),(0,C.jsxs)("p",{children:[e.price.toFixed(2)," z\u0142"]}),(0,C.jsxs)("div",{className:N,children:[(0,C.jsx)("button",{onClick:function(){return function(e){var n=(0,u.Z)(P),t=n.findIndex((function(n){return n.ingredientId===e.ingredientId})),i=P[t];if(i){var a=(0,d.Z)((0,d.Z)({},i),{},{amount:i.amount-=1});a.amount<=0?n.splice(t):n[t]=a,M(n),I((function(n){return n-e.price}));var r=n.filter((function(e){return"extra"===e.ingredientType})).map((function(e){return e.ingredientName+" x"+e.amount+"("+(e.amount*e.price).toFixed(2)+"z\u0142), "})).join("").slice(0,-2);Y(r)}}(e)},children:"-"}),(0,C.jsx)("p",{children:K(e.ingredientId)}),(0,C.jsx)("button",{onClick:function(){return function(e){var n=(0,u.Z)(P),t=n.findIndex((function(n){return n.ingredientId===e.ingredientId})),i=P[t];if(i){var a=(0,d.Z)((0,d.Z)({},i),{},{amount:i.amount+=1});n[t]=a}else{var r=(0,d.Z)((0,d.Z)({},e),{},{amount:1});n=[].concat((0,u.Z)(P),[r])}M(n),I((function(n){return n+e.price}));var c=n.filter((function(e){return"extra"===e.ingredientType})).map((function(e){return e.ingredientName+" x"+e.amount+"("+(e.amount*e.price).toFixed(2)+"z\u0142), "})).join("").slice(0,-2);Y(c)}(e)},children:"+"})]})]},e.ingredientId)})),"Pizza"===e.type&&(0,C.jsxs)("select",{onChange:function(n){var t=(0,u.Z)(P),i=P[0],a=i.price,r=i;"small"===n.target.value&&(r={ingredientId:w[0].ingredientId,ingredientName:"32cm",price:0,amount:1}),"medium"===n.target.value&&(r={ingredientId:w[1].ingredientId,ingredientName:"46cm",price:6,amount:1}),"big"===n.target.value&&(r={ingredientId:w[2].ingredientId,ingredientName:"52cm",price:8,amount:1}),t[0]=r,M(t),I((function(e){return e+(r.price-a)}));var c=t.filter((function(e){return"extra"===e.ingredientType})).map((function(e){return e.ingredientName+" x"+e.amount+"("+(e.amount*e.price).toFixed(2)+"z\u0142), "})).join("").slice(0,-2);Y(c),R(n.target.value),A(e.name+" "+r.ingredientName)},value:L,name:"size",label:"Rozmiar",className:y,children:[(0,C.jsx)("option",{value:"small",children:"\u015arednia (32cm)"}),(0,C.jsx)("option",{value:"medium",children:"Du\u017ca (46cm) +6.00z\u0142"}),(0,C.jsx)("option",{value:"big",children:"Gigant (52cm) +8.00z\u0142"})]}),(0,C.jsx)("button",{className:v,onClick:function(t){t.preventDefault();var i,a=P;a.sort((i="ingredientId",function(e,n){return e[i]<n[i]?-1:e[i]>n[i]?1:0})),n.addItem({id:e.id,name:e.name,price:Z.toFixed(2),amount:l,type:e.type,extras:a}),e.closeModal()},children:"Dodaj do koszyka"})]})]})},b=function(e){var n,t=document.getElementById("overlays");return document.onkeydown=function(n){"Escape"===n.key&&e.closeModal()},(0,C.jsxs)(s.Fragment,{children:[m.createPortal((0,C.jsx)(Z,{closeModal:e.closeModal}),t),m.createPortal((0,C.jsx)(I,(n={id:e.id,closeModal:e.closeModal,imgUrl:e.imgUrl,name:e.name,description:e.description,type:e.type,price:e.price},(0,l.Z)(n,"type",e.type),(0,l.Z)(n,"children",e.children),n)),t)]})},E="PizzaList_pizzalist__zej6V",P="PizzaList_pizzatext__up8At",M="PizzaList_btn__hB9Oy",S=function(e){(0,s.useContext)(o.Z);var n=(0,s.useState)(!1),t=(0,a.Z)(n,2),i=t[0],r=t[1];return(0,C.jsxs)(s.Fragment,{children:[i&&(0,C.jsx)(b,{id:e.id,imgUrl:e.imgUrl,name:e.name,description:e.description,price:e.price,type:e.type,closeModal:function(){r(!1)}}),(0,C.jsxs)("li",{className:E,children:[(0,C.jsx)("img",{src:e.imgUrl,alt:e.name}),(0,C.jsxs)("div",{className:P,children:[(0,C.jsx)("h2",{children:e.name}),(0,C.jsx)("h3",{children:e.description})]}),(0,C.jsxs)("div",{className:M,children:[e.price," z\u0142",(0,C.jsx)("i",{onClick:function(){r(!0)},className:"fas fa-plus"})]})]},e.id)]})},D="CategoryNav_ul__Hny-j",w="CategoryNav_active__7dXOB",F=function(e){var n=(0,s.useState)("Pizza"),t=(0,a.Z)(n,2),i=t[0],r=t[1];return(0,C.jsxs)("ul",{className:D,children:[(0,C.jsx)("li",{onClick:function(){r("Pizza"),e.filterChange("Pizza")},className:"".concat("Pizza"===i?w:""),children:"Pizza"},"1cat"),(0,C.jsx)("li",{onClick:function(){r("Makaron"),e.filterChange("Makaron")},className:"".concat("Makaron"===i?w:""),children:"Makaron"},"2cat"),(0,C.jsx)("li",{onClick:function(){r("Salatki"),e.filterChange("Salatka")},className:"".concat("Salatki"===i?w:""),children:"Sa\u0142atki"},"3cat"),(0,C.jsx)("li",{onClick:function(){r("Dzieciece"),e.filterChange("Dzieciece")},className:"".concat("Dzieciece"===i?w:""),children:"Menu dzieci\u0119ce"},"4cat"),(0,C.jsx)("li",{onClick:function(){r("Dodatki"),e.filterChange("Dodatki")},className:"".concat("Dodatki"===i?w:""),children:"Dodatki"},"5cat"),(0,C.jsx)("li",{onClick:function(){r("Napoje"),e.filterChange("Napoje")},className:"".concat("Napoje"===i?w:""),children:"Napoje"},"6cat")]})},U="MealsList_mealscard__9nG6d",T="MealsList_menu__mHaRT",L=function(){var e=(0,s.useState)("Pizza"),n=(0,a.Z)(e,2),t=n[0],r=n[1],o=(0,s.useState)(),l=(0,a.Z)(o,2),d=l[0],u=l[1];function m(){return(m=(0,i.Z)(c().mark((function e(){var n,t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://localhost:44376/api/Products");case 3:if((n=e.sent).ok){e.next=6;break}throw new Error;case 6:return e.next=8,n.json();case 8:t=e.sent,u(t),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}(0,s.useEffect)((function(){!function(){m.apply(this,arguments)}()}),[]);return(0,C.jsxs)("div",{className:T,children:[(0,C.jsx)(F,{filterChange:function(e){r(e)}}),(0,C.jsxs)("ul",{className:U,children:[d&&d.filter((function(e){return e.productType===t})).map((function(e){return(0,C.jsx)(S,{id:e.productId,name:e.productName,type:t,description:e.description,price:e.price,imgUrl:e.pictureUrl},e.productId)})),!d&&(0,C.jsx)("p",{children:"Menu jest aktualnie puste."})]})]})},R=function(){return(0,C.jsx)(L,{})}}}]);
//# sourceMappingURL=54.cd241d94.chunk.js.map